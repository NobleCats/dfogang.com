(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88594,e=>{e.v({closeButton:"MobileAnchorAd-module__Np-dda__closeButton",mobileAnchorAd:"MobileAnchorAd-module__Np-dda__mobileAnchorAd",slideUp:"MobileAnchorAd-module__Np-dda__slideUp"})},47896,e=>{"use strict";var a=e.i(47167),t=e.i(43476),r=e.i(71645),s=e.i(88594);function n(){let[e,n]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=()=>{window.scrollY>200&&!o&&l(!0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[o]),(0,r.useEffect)(()=>{if(e&&o)try{window.adsbygoogle&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(e){console.error("AdSense error:",e)}},[e,o]),e&&o)?(0,t.jsxs)("div",{className:s.default.mobileAnchorAd,children:[(0,t.jsx)("button",{className:s.default.closeButton,onClick:()=>{n(!1)},"aria-label":"Close ad",children:"âœ•"}),(0,t.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":a.default.env.NEXT_PUBLIC_ADSENSE_CLIENT,"data-ad-slot":"5267707928","data-ad-format":"auto","data-full-width-responsive":"true"})]}):null}e.s(["MobileAnchorAd",()=>n])},33999,e=>{"use strict";e.i(44885),e.i(37283),e.i(47896),e.i(14271),e.s([])},26209,e=>{"use strict";let a;var t=e.i(71645);let r=e=>{let a,t=new Set,r=(e,r)=>{let s="function"==typeof e?e(a):e;if(!Object.is(s,a)){let e=a;a=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},a,s),t.forEach(t=>t(a,e))}},s=()=>a,n={setState:r,getState:s,getInitialState:()=>o,subscribe:e=>(t.add(e),()=>t.delete(e))},o=a=e(r,s,n);return n},s=e=>{let a=e?r(e):r,s=e=>(function(e,a=e=>e){let r=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>a(e.getState()),[e,a]),t.default.useCallback(()=>a(e.getInitialState()),[e,a]));return t.default.useDebugValue(r),r})(a,e);return Object.assign(s,a),s},n={view:e.i(69841).VIEWS.MAIN,isLoading:!1,error:null,searchTerm:"",server:"cain",allSearchResults:[],displayedResults:[],searchOptions:{exactMatch:!1,dpsOnly:!1,saderOnly:!1,sortBy:"fame"},pagination:{currentPage:1,itemsPerPage:20,totalItems:0},characterDetail:{profile:null,equipment:null,setItemInfo:null,fameHistory:null,gearHistory:null,isBuffer:!1,buffData:null},dps:{options:{},result:null,isCalculating:!1}},o=(a=(e,a)=>({...n,setView:a=>e({view:a}),setLoading:a=>e({isLoading:a}),setError:a=>e({error:a}),setSearchTerm:a=>e({searchTerm:a}),setServer:a=>e({server:a}),setSearchResults:t=>{let{pagination:r}=a(),s=(r.currentPage-1)*r.itemsPerPage,n=s+r.itemsPerPage,o=t.slice(s,n);e({allSearchResults:t,displayedResults:o,pagination:{...r,totalItems:t.length}})},setSearchOptions:a=>e(e=>({searchOptions:{...e.searchOptions,...a}})),setPage:t=>{let{allSearchResults:r,pagination:s}=a(),n=(t-1)*s.itemsPerPage,o=n+s.itemsPerPage;e({displayedResults:r.slice(n,o),pagination:{...s,currentPage:t}})},setCharacterDetail:a=>e(e=>({characterDetail:{...e.characterDetail,...a}})),setDpsOptions:a=>e(e=>({dps:{...e.dps,options:{...e.dps.options,...a}}})),resetDpsOptions:()=>e(e=>({dps:{...e.dps,options:{}}})),setDpsResult:a=>e(e=>({dps:{...e.dps,result:a}})),setDpsCalculating:a=>e(e=>({dps:{...e.dps,isCalculating:a}})),clearSearch:()=>e({allSearchResults:[],displayedResults:[],pagination:{...n.pagination},error:null}),reset:()=>e(n)}))?s(a):s;e.s(["useSearchStore",0,o],26209)},81323,e=>{e.v({accordionContainer:"Accordion-module__rN-DYq__accordionContainer",accordionContent:"Accordion-module__rN-DYq__accordionContent",accordionHeader:"Accordion-module__rN-DYq__accordionHeader",accordionHeaderIcon:"Accordion-module__rN-DYq__accordionHeaderIcon",accordionItem:"Accordion-module__rN-DYq__accordionItem",active:"Accordion-module__rN-DYq__active",first:"Accordion-module__rN-DYq__first",last:"Accordion-module__rN-DYq__last",open:"Accordion-module__rN-DYq__open"})},5548,e=>{e.v({announcementSection:"SearchPage-module__F2a_ea__announcementSection",cardGrid:"SearchPage-module__F2a_ea__cardGrid",checkbox:"SearchPage-module__F2a_ea__checkbox",checkboxGroup:"SearchPage-module__F2a_ea__checkboxGroup",dpsOptions:"SearchPage-module__F2a_ea__dpsOptions",mainLogo:"SearchPage-module__F2a_ea__mainLogo",mainLogoLink:"SearchPage-module__F2a_ea__mainLogoLink",recentSearchChip:"SearchPage-module__F2a_ea__recentSearchChip",recentSearchContent:"SearchPage-module__F2a_ea__recentSearchContent",recentSearchDelete:"SearchPage-module__F2a_ea__recentSearchDelete",recentSearchName:"SearchPage-module__F2a_ea__recentSearchName",recentSearchServer:"SearchPage-module__F2a_ea__recentSearchServer",recentSearches:"SearchPage-module__F2a_ea__recentSearches",results:"SearchPage-module__F2a_ea__results",resultsCount:"SearchPage-module__F2a_ea__resultsCount",searchAdvancedOptions:"SearchPage-module__F2a_ea__searchAdvancedOptions",searchBox:"SearchPage-module__F2a_ea__searchBox",searchButton:"SearchPage-module__F2a_ea__searchButton",searchButtonIcon:"SearchPage-module__F2a_ea__searchButtonIcon",searchButtonText:"SearchPage-module__F2a_ea__searchButtonText",searchContainer:"SearchPage-module__F2a_ea__searchContainer",searchInput:"SearchPage-module__F2a_ea__searchInput",searchPage:"SearchPage-module__F2a_ea__searchPage",searchSection:"SearchPage-module__F2a_ea__searchSection",sectionTitle:"SearchPage-module__F2a_ea__sectionTitle",serverSelect:"SearchPage-module__F2a_ea__serverSelect",sortLabel:"SearchPage-module__F2a_ea__sortLabel",sortSelect:"SearchPage-module__F2a_ea__sortSelect",sortWrapper:"SearchPage-module__F2a_ea__sortWrapper",spacer:"SearchPage-module__F2a_ea__spacer"})},32442,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(18566),s=e.i(66027),n=e.i(27371),o=e.i(26209),l=e.i(43193);e.i(33999);var c=e.i(44885),i=e.i(14271),d=e.i(37283),u=e.i(81323);function h({items:e}){let[r,s]=(0,t.useState)(null);return(0,a.jsx)("div",{className:u.default.accordionContainer,children:e.map((t,n)=>(0,a.jsxs)("div",{className:`${u.default.accordionItem} ${0===n?u.default.first:""} ${n===e.length-1?u.default.last:""}`,children:[(0,a.jsxs)("div",{className:`${u.default.accordionHeader} ${r===t.id?u.default.active:""}`,onClick:()=>{var e;s(r===(e=t.id)?null:e)},children:[(0,a.jsx)("span",{children:t.title}),(0,a.jsx)("span",{className:u.default.accordionHeaderIcon,children:"+"})]}),(0,a.jsx)("div",{className:`${u.default.accordionContent} ${r===t.id?u.default.open:""}`,dangerouslySetInnerHTML:{__html:t.content}})]},t.id))})}var p=e.i(5548);let m=[{id:"phantom_tessaiga_fix_nov14",title:"[11/14] Title Leveling Issue Fixed",content:"<p>We have fixed the issue where the leveling of the <strong>Phantom City</strong> and the <strong>Tessaiga</strong> title was not calculated properly.</p>"},{id:"inae_set_balance_jan15",title:"[01/15] Inae Set Balance & DFOGANG System Update",content:`<p>With the upcoming <strong>Inae</strong> set balance patch, DFOGANG is also preparing a major system update.</p>
  <p>This update will include separate buff power displays for Enchantress in 2-player and 4-player parties, as well as Pack Set damage values based on 4-player party conditions.</p>

  <p>We have identified that the object damage of certain sets has been evaluated at excessively high levels.</p>
  <p>While DFOGANG aims to avoid applying arbitrary modifications to in-game values, purely theoretical or unrealistic damage scenarios that result in excessive evaluations will be adjusted in the <strong>January 20</strong> update.</p>

  <p>Recently, excessive bot traffic has caused frequent server outages.</p>
  <p>To improve traffic management, the logic for loading character images has been modified. As a result, some information displayed on the character detail page may update more slowly than before. (This does not affect character scores.)</p>

  <p><strong>DFOGANG is a community-supported service operated entirely through user donations.</strong></p>
  <p>If you find DFOGANG helpful, please consider supporting us via <a href="https://ko-fi.com/dfogang" target="_blank">ko-fi.com/dfogang</a>. Your support directly helps us maintain server stability and continue developing new features for the community.</p>`},{id:"avatar_mapping_nov12",title:"[11/12] Avatar Mapping & Missing Avatar Update",content:`<p>Recently, the avatar display feature has been added!</p>
<p>However, avatars that are currently not supported will not appear â€” these must be manually mapped by me.</p>
<p>At the moment, this is creating over <strong>800 issues per day</strong>, which is quite overwhelming for one person to handle.</p>
<p>Although I'm focusing on updating the latest avatars first, there's a clear limit to how much I can manage alone. To improve this situation, I have a few ideas:</p>
<ul>
<li><strong>Option 1:</strong> Find someone who can help analyze the client and locate missing avatars.</li>
<li><strong>Option 2:</strong> Let users contribute directly on the site. I'll review the collected data and apply verified updates to the server.</li>
<li><strong>Option 3:</strong> Accept that supporting <em>every</em> avatar is unrealistic, and instead focus on gradually expanding the supported list.</li>
</ul>
<p>I'd love to hear your thoughts on these ideas!</p>
<p>Please share your preference by filling out this short survey: <a href="https://docs.google.com/forms/d/e/1FAIpQLSdaIVMduvsE1EqCLe0S91ZsWSE4Hk_O7YMruOpaZYDsQ89E5Q/viewform?usp=dialog" target="_blank">Avatar Mapping Feedback Survey</a></p>`},{id:"avatar_preview_nov11",title:"[11/11] Avatar Preview Feature (beta) Updated",content:`<p>The avatar preview feature is currently being rolled out gradually by class.</p>
<p>Due to technical limitations, some avatars (including collaboration avatars) and dyed avatars may not be displayed correctly.</p>
<p>We do plan to support these in the future, but resolving this issue would require an <em>unimaginable</em> amount of work, so it's unlikely to be updated anytime soon.</p>
<p>We appreciate your understanding. ;3</p>`},{id:"buff_error_oct29",title:"[10/29] Buff Calculation Error (Fixed)",content:`<p><del>As of 10/29, there is currently an error in Buff Score calculation.</del></p>
<p><del>It is unclear whether this is due to recent changes in the API response structure.</del></p>
<p><del>Even the related code has been rolled back, still the issue occurs on some characters.</del></p>
<p><del>We are working to identify the cause and will fix it as soon as possible.</del></p>
<p></p>
<p>Fixed!</p>`},{id:"avatar_update_oct23",title:"[10/23] Avatar Update Complete",content:"<p>All avatars have been updated to the latest version. Please report any issues you encounter.</p>"}],g="dfo_recent_searches";function _(){try{let e=localStorage.getItem(g);return e?JSON.parse(e):[]}catch{return[]}}e.s(["default",0,function(){let e=(0,r.useRouter)(),u=(0,r.useSearchParams)(),[f,v]=(0,t.useState)(""),[S,x]=(0,t.useState)("cain"),[y,b]=(0,t.useState)(!1),[N,j]=(0,t.useState)(!1),[P,w]=(0,t.useState)(!1),[C,I]=(0,t.useState)(!1),[A,k]=(0,t.useState)("fame"),[F,D]=(0,t.useState)([]),E=(0,t.useRef)(!1),L=(0,t.useRef)(!1),O=(0,t.useRef)(""),T=(0,t.useRef)(!1),{displayedResults:B,pagination:R,setSearchResults:$,setPage:G,setError:M,clearSearch:q}=(0,o.useSearchStore)();(0,t.useEffect)(()=>{q()},[q]),(0,t.useEffect)(()=>{D(_())},[]);let{data:U,isLoading:H,error:W,refetch:Y}=(0,s.useQuery)({queryKey:["search",S,f,y],queryFn:async()=>{if(!f||f.length<1)return[];let e=await (0,n.searchCharacters)(S,f,y);(0,n.logSearch)(S,f);try{let e=_().filter(e=>e.server!==S||e.name.toLowerCase()!==f.toLowerCase());e.unshift({server:S,name:f,timestamp:Date.now()});let a=e.slice(0,10);localStorage.setItem(g,JSON.stringify(a))}catch{}return D(_()),e},enabled:!1,staleTime:3e5});(0,t.useEffect)(()=>{T.current=!0;let e=u.get("name"),a=u.get("server"),t=u.get("exact"),r=u.get("dps"),s=u.get("sader"),n=u.get("sort"),o=u.get("page");if(e&&v(e),a&&x(a),"true"===t?j(!0):j(!1),"true"===r?w(!0):w(!1),"true"===s?I(!0):I(!1),n&&["fame","dps","name"].includes(n)?k(n):k("fame"),o){let e=parseInt(o,10);!isNaN(e)&&e>0&&G(e)}else G(1);let l=`${a||"cain"}-${e||""}`;e&&e.length>=1&&l!==O.current&&(O.current=l,E.current=!0,L.current=!0),setTimeout(()=>{T.current=!1},0)},[u,G]),(0,t.useEffect)(()=>{L.current&&f.length>=1&&(L.current=!1,Y())},[f,S,Y]),(0,t.useEffect)(()=>{if(U){let e=[...U];if(N&&(e=e.filter(e=>e.characterName.toLowerCase()===f.toLowerCase()||e.adventureName&&e.adventureName.toLowerCase()===f.toLowerCase())),P&&(e=e.filter(e=>!(0,l.isBufferClass)(e.jobGrowName))),C&&(e=e.filter(e=>(0,l.isBufferClass)(e.jobGrowName))),"fame"===A)e.sort((e,a)=>(a.fame||0)-(e.fame||0));else if("dps"===A){let a=e=>e.dps?.normal||e.total_buff_score||0;e.sort((e,t)=>a(t)-a(e))}else"name"===A&&e.sort((e,a)=>e.characterName.localeCompare(a.characterName));$(e)}},[U,N,P,C,A,f,$]);let J=(a=!1)=>{let t=new URLSearchParams;S&&t.set("server",S),f&&t.set("name",f),N&&t.set("exact","true"),P&&t.set("dps","true"),C&&t.set("sader","true"),"fame"!==A&&t.set("sort",A);let r=a?1:R.currentPage;r>1&&t.set("page",r.toString());let s=`/?${t.toString()}`;e.replace(s,{scroll:!1})};(0,t.useEffect)(()=>{!T.current&&E.current&&B.length>0&&(G(1),J(!0))},[N,P,C,A]),(0,t.useEffect)(()=>{!T.current&&E.current&&B.length>0&&J(!1)},[R.currentPage]),(0,t.useEffect)(()=>{let a=a=>{if("Backspace"===a.key){let t=a.target,r=t.tagName.toLowerCase();"input"===r||"textarea"===r||"select"===r||t.isContentEditable||(a.preventDefault(),e.back())}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]);let K=()=>{!f||f.length<1?M("Please enter at least 1 characters"):(G(1),J(!0),Y())},Q=Math.ceil(R.totalItems/R.itemsPerPage);return(0,a.jsxs)("div",{className:p.default.searchPage,children:[(0,a.jsxs)("section",{className:p.default.searchSection,children:[(0,a.jsx)("a",{href:"/",className:p.default.mainLogoLink,children:(0,a.jsx)("img",{src:"/assets/image/dfogang_newyear.png",alt:"DFO Gang",className:p.default.mainLogo})}),(0,a.jsxs)("div",{className:p.default.searchContainer,children:[(0,a.jsxs)("div",{className:p.default.searchBox,children:[(0,a.jsxs)("select",{className:p.default.serverSelect,value:S,onChange:e=>x(e.target.value),children:[(0,a.jsx)("option",{value:"cain",children:"Cain"}),(0,a.jsx)("option",{value:"siroco",children:"Sirocco"}),(0,a.jsx)("option",{value:"explorer",children:"ExplorerName"})]}),(0,a.jsx)("input",{type:"text",className:p.default.searchInput,value:f,onChange:e=>v(e.target.value),onKeyDown:e=>"Enter"===e.key&&K(),placeholder:"Character or Explorer Name"}),(0,a.jsxs)("button",{className:p.default.searchButton,onClick:K,onMouseDown:e=>{if(1===e.button&&f&&f.length>=1){e.preventDefault(),e.stopPropagation();let a=`/?server=${S}&name=${encodeURIComponent(f)}`;window.open(a,"_blank","noopener,noreferrer")}},disabled:H,children:[(0,a.jsx)("span",{className:p.default.searchButtonText,children:"SEARCH"}),(0,a.jsx)("span",{className:p.default.searchButtonIcon,children:"ðŸ”"})]})]}),F.length>0&&(0,a.jsx)("div",{className:p.default.recentSearches,children:F.map(t=>(0,a.jsxs)("div",{className:p.default.recentSearchChip,onClick:()=>{let a,r;return(a=new URLSearchParams).set("server",t.server),a.set("name",t.name),r=`/?${a.toString()}`,void e.push(r)},onMouseDown:e=>{if(1===e.button){e.preventDefault(),e.stopPropagation();let a=`/?server=${t.server}&name=${encodeURIComponent(t.name)}`;window.open(a,"_blank","noopener,noreferrer")}},children:[(0,a.jsxs)("div",{className:p.default.recentSearchContent,children:[(0,a.jsx)("span",{className:p.default.recentSearchServer,children:t.server}),(0,a.jsx)("span",{className:p.default.recentSearchName,children:t.name})]}),(0,a.jsx)("button",{className:p.default.recentSearchDelete,onClick:e=>{e.stopPropagation(),function(e,a){try{let t=_().filter(t=>t.server!==e||t.name.toLowerCase()!==a.toLowerCase());localStorage.setItem(g,JSON.stringify(t))}catch{}}(t.server,t.name),D(_())},children:"Ã—"})]},`${t.server}-${t.name}-${t.timestamp}`))})]}),(0,a.jsxs)("div",{className:p.default.searchAdvancedOptions,children:[(0,a.jsx)("div",{className:p.default.spacer}),(0,a.jsxs)("div",{className:p.default.checkboxGroup,children:[(0,a.jsxs)("label",{className:p.default.checkbox,children:[(0,a.jsx)("input",{type:"checkbox",checked:N,onChange:e=>j(e.target.checked)}),(0,a.jsx)("span",{children:"Exact Match"})]}),(0,a.jsxs)("label",{className:p.default.checkbox,children:[(0,a.jsx)("input",{type:"checkbox",checked:P,onChange:e=>{w(e.target.checked),e.target.checked&&I(!1)}}),(0,a.jsx)("span",{children:"DPS Only"})]}),(0,a.jsxs)("label",{className:p.default.checkbox,children:[(0,a.jsx)("input",{type:"checkbox",checked:C,onChange:e=>{I(e.target.checked),e.target.checked&&w(!1)}}),(0,a.jsx)("span",{children:"Sader Only"})]})]}),(0,a.jsx)("div",{className:p.default.sortWrapper,children:(0,a.jsxs)("label",{className:p.default.sortLabel,children:[(0,a.jsx)("span",{children:"Sort:"}),(0,a.jsxs)("select",{className:p.default.sortSelect,value:A,onChange:e=>k(e.target.value),children:[(0,a.jsx)("option",{value:"fame",children:"Fame"}),(0,a.jsx)("option",{value:"dps",children:"Score"}),(0,a.jsx)("option",{value:"name",children:"Name"})]})]})})]}),(0,a.jsx)("div",{className:p.default.dpsOptions,children:(0,a.jsx)(i.DpsToggle,{label:"Set Normalize",value:y,onChange:b,tooltip:"Calculate DPS as if using Death in the Shadows Set"})})]}),!H&&0===B.length&&(0,a.jsxs)("div",{className:p.default.announcementSection,children:[(0,a.jsx)("h2",{className:p.default.sectionTitle,children:"NOTICE"}),(0,a.jsx)(h,{items:m.slice(0,5)})]}),(0,a.jsxs)("main",{className:p.default.results,children:[H&&(0,a.jsx)(i.LoadingSpinner,{message:"Searching..."}),W&&(0,a.jsx)(i.ErrorMessage,{message:"Failed to search. Please try again."}),!H&&!W&&void 0!==U&&0===B.length&&(0,a.jsx)(i.EmptyState,{message:"No characters found. Try a different search term."}),!H&&B.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p.default.resultsCount,children:["Found ",R.totalItems," character",1!==R.totalItems?"s":""]}),(0,a.jsx)("div",{className:p.default.cardGrid,children:B.map(t=>{let r=t.dps&&"object"==typeof t.dps?y?t.dps.normalized:t.dps.normal:null,s=`/character?server=${t.serverId}&name=${encodeURIComponent(t.characterName)}`;return(0,a.jsx)(c.CharacterCard,{profile:t,searchName:f,dpsToShow:r,detailUrl:s,onClick:()=>{var a,r;return t.characterId,a=t.characterName,r=t.serverId,void e.push(`/character?server=${r}&name=${encodeURIComponent(a)}`)}},`${t.serverId}-${t.characterId}`)})}),Q>1&&(0,a.jsx)(i.Pagination,{currentPage:R.currentPage,totalPages:Q,onPageChange:G}),(0,a.jsx)(d.AdSense,{adSlot:"3351264676",style:{margin:"40px auto",maxWidth:"728px",minHeight:"90px"}})]})]})]})}],32442)}]);